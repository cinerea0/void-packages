# Template file for 'qownnotes'
pkgname=qownnotes
version=24.8.4
revision=1
build_style=qmake
build_helper=qemu
configure_args="USE_SYSTEM_BOTAN=1"
hostmakedepends="pkg-config qt6-base"
makedepends="botan-devel qt6-base-devel qt6-declarative-devel
 qt6-qt5compat-devel qt6-svg-devel qt6-websockets-devel"
depends="qt6-plugin-sqlite qt6-svg"
short_desc="Plain-text file notepad and todo-list manager with markdown support"
maintainer="travankor <travankor@tuta.io>"
license="GPL-2.0-only"
homepage="https://www.qownnotes.org"
changelog="https://raw.githubusercontent.com/pbek/QOwnNotes/main/CHANGELOG.md"
distfiles="https://github.com/pbek/QOwnNotes/releases/download/v${version}/qownnotes-${version}.tar.xz"
checksum=b81dccb6d570efe7ba851309d94698bdc6a87cc12f913a16a4185595d7069ab2

post_install() {
	for shell in bash fish; do
		QT_QPA_PLATFORM=offscreen vtargetrun "${DESTDIR}/usr/bin/QOwnNotes" --completion "${shell}" > "QOwnNotes.${shell}"
		vcompletion "QOwnNotes.${shell}" "${shell}"
	done
}
